pico-8 cartridge // http://www.pico-8.com
version 16
__lua__
-- ping2
-- by neil popham

-- tidy the collision/movement cross-over
-- add cayote time
-- add pre-land


local pad={left=0,right=1,up=2,down=3,btn1=4,btn2=5} -- pico-8
--local pad={left=2,right=3,up=0,down=1,btn1=4,btn2=5,btn3=6,btn4=7} -- tic-80

local screen={width=128,height=128} -- pico-8
--local screen={width=240,height=136} -- tic-80

local dir={left=1,right=2}
local drag={air=1,ground=0.8,gravity=0.25,wall=0}

function round(x) return flr(x+0.5) end

function create_camera(item,width,height)
 local c={
  map={w=width,h=height},
  target=item,
  x=item.x,
  y=item.y,
  buffer={x=16,y=16},
  min={x=8*flr(screen.width/16),y=8*flr(screen.height/16)}
 }
 c.max={x=width-c.min.x,y=height-c.min.y,shift=2}
 c.update=function(self)
  local min_x = self.x-self.buffer.x
  local max_x = self.x+self.buffer.x
  local min_y = self.y-self.buffer.y
  local max_y = self.y+self.buffer.y
  if min_x>self.target.x then
   self.x=self.x+min(self.target.x-min_x,self.max.shift)
  end
  if max_x<self.target.x then
   self.x=self.x+min(self.target.x-max_x,self.max.shift)
  end
  if min_y>self.target.y then
   self.y=self.y+min(self.target.y-min_y,self.max.shift)
  end
  if max_y<self.target.y then
   self.y=self.y+min(self.target.y-max_y,self.max.shift)
  end
  if self.x<self.min.x then
   self.x=self.min.x
  elseif self.x>self.max.x then
   self.x=self.max.x
  end
  if self.y<self.min.y then
   self.y=self.min.y
  elseif self.y>self.max.y then
   self.y=self.max.y
  end
 end
 c.position=function(self)
  return self.x-self.min.x,self.y-self.min.y
 end
 c.map=function(self)
  camera(self:position())
  map(0,0)
 end
 return c
end

function create_counter(min,max)
 local t={tick=0,min=min,max=max}
 t.increment=function(self)
  self.tick=self.tick+1
  if self.tick>self.max then
   self:reset()
   if type(self.on_max)=="function" then
    self:on_max()
   end
  end
 end
 t.reset=function(self)
  self.tick=0
 end
 t.valid=function(self)
  return self.tick>=self.min and self.tick<=self.max
 end
 return t
end

function create_button(index)
 local b=create_counter(2,20)
 b.index=index
 b.released=true
 b.check=function(self)
  if btn(self.index) then
   if self.tick==0 and not self.released then return end
   self:increment()
   self.released=false
  else
   if not self.released then
    if self.tick>12 or self.tick==0 then
     if type(self.on_long)=="function" then
      self:on_long()
     end
    else
     if type(self.on_short)=="function" then
      self:on_short()
     end
    end
   end
   self:reset()
   self.released=true
  end
 end
 b.pressed=function(self)
  self:check()
  return self:valid()
 end
 b.on_max=function(self)
  printh("on_max") -- ###################################
 end
 return b
end

function create_item(x,y)
 local i={x=x,y=y,hitbox={x=0,y=0,w=8,h=8,x2=7,y2=7}}
 i.add_hitbox=function(self,w,h,x,y)
  x=x or 0
  y=y or 0
  self.hitbox={x=x,y=y,w=w,h=h,x2=x+w-1,y2=y+h-1}
 end
 return i
end

function create_movable_item(x,y,ax,ay)
 local i=create_item(x,y)
 i.dx=0
 i.dy=0
 i.min={dx=0.05,dy=0.05}
 i.max={dx=1,dy=2}
 i.ax=ax
 i.ay=ay
 i.is={
  grounded=false,
  jumping=false,
  sliding=false,
  falling=false,
  invisible=false
 }
 i.slide=create_counter(1,15)
 i.slide.on_max=function(self)
  printh("slide timeout") -- #####################################################
 end
 i.preslide=create_counter(1,50)
 i.preslide.on_max=function(self)
  printh("preslide timeout") -- #####################################################
 end
 i.cayote=create_counter(1,3)
 i.cayote.on_max=function(self)
  printh("cayote timeout") -- #####################################################
  printh("cayote.max:"..self.max) -- #####################################################
 end
 i.anim={
  init=function(self,stage,face)
   -- record frame count for each stage face
   for s in pairs(self.stage) do
    for f=1,2 do
     self.stage[s].face[f].fcount=#self.stage[s].face[f].frames
    end
   end
   -- init current values
   self.current:set(stage,face)
  end,
  stage={},
  current={
   reset=function(self)
    self.frame=1
    self.tick=0
    self.loop=true
    self.transitioning=false
   end,
   set=function(self,stage,face)
    if self.stage==stage then return end
    self.reset(self)
    self.stage=stage
    self.face=face or self.face
   end
  },
  add_stage=function(self,name,ticks,loop,left,right,next)
   self.stage[name]=create_stage(ticks,loop,left,right,next)
  end
 }
 i.set_state=function(self, state)
  for s in pairs(self.is) do
   self.is[s]=false
  end
  self.is[state]=true
 end
 i.draw=function(self)
  if self.is.invisible then return end
  sprite=self.animate(self)
  spr(sprite,self.x,self.y)
 end
 i.animate=function(self)
  local current=self.anim.current
  local stage=self.anim.stage[current.stage]
  local face=stage.face[current.face]
  if current.loop then
   current.tick=current.tick+1
   if current.tick==stage.ticks then
    current.tick=0
    current.frame=current.frame+1
    if current.frame>face.fcount then
     if stage.next then
      current:set(stage.next)
      face=self.anim.stage[current.stage].face[current.face]
     elseif stage.loop then
      current.frame=1
     else
      current.frame=face.fcount
      current.loop=false
     end
    end
   end
  end
  return face.frames[current.frame]
 end
 i.collide_map=function(self)
  local x=self.x+self.dx
  local y=self.y+self.dy
  local hitbox=self.hitbox
  local x1=(x+hitbox.x)/8
  local y1=(y+hitbox.y)/8
  local x2=(x+hitbox.x2)/8
  local y2=(y+hitbox.y2)/8
  return fget(mget(x1,y1),0)
   or fget(mget(x1,y2),0)
   or fget(mget(x2,y2),0)
   or fget(mget(x2,y1),0)
 end
 i.collide_object=function(self,object)
  local x=self.x+self.dx
  local y=self.y+self.dy
  local hitbox=self.hitbox
  return object.x<x+hitbox.w
     and object.x+object.htbox.w>x
     and object.y<y+hitbox.h
     and object.y+object.hitbox.h>y
 end
 i.can_move=function(self,points,flag)
  for _,p in pairs(points) do
   local tx=flr(p[1]/8)
   local ty=flr(p[2]/8)
   --printh("tx:"..tx) -- ###########################
   --printh("ty:"..ty) -- ###########################
   tile=mget(tx,ty)
   --printh("tile:"..tile) -- ###########################
   if flag and fget(tile,flag) then
    return {ok=false,flag=flag,tile=tile,tx=tx*8,ty=ty*8}
   elseif fget(tile,0) then
    return {ok=false,flag=0,tile=tile,tx=tx*8,ty=ty*8}
   end
  end
  return {ok=true}
 end
 i.can_move_x=function(self)
  local x=self.x+round(self.dx)
  if self.dx>0 then x=x+7 end
  --printh("can_move_x") -- ###########################
  --printh(x..","..self.y.." and "..x..","..(self.y+7)) -- ###########################
  return self:can_move({{x,self.y},{x,self.y+7}},1)
 end
 i.can_move_y=function(self)
  local y=self.y+round(self.dy)
  if self.dy>0 then y=y+7 end
  --printh("can_move_y") -- ###########################
  --printh(self.x..","..y.." and "..(self.x+7)..","..y) -- ###########################
  return self:can_move({{self.x,y},{self.x+7,y}})
 end
 return i
end

function create_controllable_item(x,y,ax,ay)
 local i=create_movable_item(x,y,ax,ay)
 i.btn1=create_button(pad.btn1)
 i.btn1.on_short=function(self)
  printh("short press") -- ###########################
 end
 i.btn1.on_long=function(self)
  printh("long press") -- ###########################
 end
 i.max.prejump=5 -- ticks allowed before hitting ground to jump
 i.can_jump=function(self)
  --if true then return true end
  if self.is.jumping
   and self.btn1:valid() then
   printh("can jump: jumping") -- ###########################
   return true
  end
  if self.is.grounded
   and self.btn1.tick<self.max.prejump then
   printh("can jump: grounded") -- ###########################
   self.btn1.tick=self.btn1.min
   return true
  end
  if self.is.falling
   and self.dx~=0
   and self.slide:valid() then
   printh("can jump: sliding") -- ###########################
   return true
  end
  if self.is.falling
   and self.cayote:valid() then
   printh("can jump: cayote") -- ###########################
   return true
  end
  return false
 end
 i.update=function(self)
  local face=self.anim.current.face
  local stage=self.anim.current.stage
  local move

  -- checks for direction change
  local check=function(self,stage,face)
   if face~=self.anim.current.face then
    if stage=="still" then stage="walk" end
    if stage=="jump_fall" then stage="fall" end
    if not self.anim.current.transitioning then
     self.anim.current:set(stage.."_turn")
     self.anim.current.transitioning=true
    end
   end
  end

  -- horizontal
  if btn(pad.left) then
   self.anim.current.face=dir.left
   check(self,stage,face)
   self.dx=self.dx-self.ax
  elseif btn(pad.right) then
   self.anim.current.face=dir.right
   check(self,stage,face)
   self.dx=self.dx+self.ax
  else
   if self.is.jumping then
    self.dx=self.dx*drag.air
   else
    self.dx=self.dx*drag.ground
    if self.is.sliding then
     self.dx=0
     self:set_state("falling")
     self.anim.current:set("fall")
    end
   end
  end
  self.dx=mid(-self.max.dx,self.dx,self.max.dx)
   move=self:can_move_x()
  if move.ok then -- we can move
   self.x=self.x+round(self.dx)
  else -- can't move horizontally
   self.x=move.tx+(self.dx>0 and -8 or 8)
   if move.flag==1 then
    if not self.is.grounded then
     printh("hit a slide wall") -- #################################
     if not self.is.sliding then
      self.preslide:increment()
     end
     if self.preslide:valid() then
       self.dy=0
       self.preslide:increment()
     else
      self.slide:increment()
     end
     --[[

     once preslide has maxed we want slide to start
     we don't want preslide to be able to start again until we hit another wall
     need to stop increment once counter has run (only increment if vvalid?)

     if self.is.sliding then
      self.slide:increment()
     else
      if self.preslide:valid() then
       self.dy=0
      end
      self.slide:reset()
      self.preslide:reset()
     end
     ]]
     local face=self.dx<0 and 1 or 2
     self.anim.current.face=face
     self.anim.current:set("wall")
     self:set_state("sliding")
    end
   end
  end

  -- jump
  if self.btn1:pressed() and self:can_jump() then
   if not self.is.jumping then
    self.anim.current:set("jump")
   end
   self:set_state("jumping")
   self.dy=self.dy+self.ay
  else
   if self.is.jumping then
    if self.dy>0 then -- if we're now falling -- may be able to remove this as transition may eat up the time
     if not self.is.sliding then
      self.anim.current:set("jump_fall")
      self:set_state("falling")
     end
    end
   end
  end
  self.dy=self.dy+drag.gravity
  self.dy=mid(-self.max.dy,self.dy,self.max.dy)
  move=self:can_move_y()
  if move.ok then -- we can move
   if self.dy>0 then
    if self.is.grounded then
     self.cayote:increment()
     if self.cayote:valid() then
      self.dy=0
     else
      self.anim.current:set("fall")
      self:set_state("falling")
     end
    else
     if not self.is.sliding then
      self.anim.current:set("fall")
      self:set_state("falling")
     end
    end
   else -- self.dy<0
    -- we're jumping i guess,
    -- currently being set in self.btn1:pressed() and self:can_jump() check above
   end
   self.y=self.y+round(self.dy)
  else -- can't move vertically
   self.y=move.ty+(self.dy>0 and -8 or 8)
   if self.dy>0 then
    if not self.anim.current.transitioning then
     self.anim.current:set(round(self.dx)==0 and "still" or "walk")
    end
    self:set_state("grounded")
    self.cayote:reset()
   else -- self.dy<0
    --self.btn1:reset()
    self.dy=0
    self.anim.current:set("fall")
    self:set_state("falling")
   end
  end
 end
 return i
end

function create_stage(ticks,loop,left,right,next)
 local s={
  ticks=ticks,
  loop=loop,
  face={{frames=left},{frames=right}},
  next=next
 }
 return s
end

function _init()

 -- player
 p=create_controllable_item(120,232,0.1,-1.75)
 p.anim:add_stage("still",1,false,{6},{12})
 p.anim:add_stage("walk",5,true,{1,2,3,4,5,6},{7,8,9,10,11,12})
 p.anim:add_stage("jump",1,false,{1},{7})
 p.anim:add_stage("fall",1,false,{32},{33})
 p.anim:add_stage("wall",1,false,{13},{28})
 p.anim:add_stage("walk_turn",5,false,{20,18,21,6},{17,18,19,12},"still")
 p.anim:add_stage("jump_turn",5,false,{25,26,27},{22,23,24},"jump")
 p.anim:add_stage("fall_turn",5,false,{25,26,27},{22,23,24},"fall")
 p.anim:add_stage("wall_turn",5,false,{29,30,31},{14,15,16},"fall")
 p.anim:add_stage("jump_fall",5,false,{2,3},{8,9},"fall")
 p.anim:init("still",dir.right)

 -- camera
 p.camera=create_camera(p,320,320)

 local x local y
 for x=0,63 do for y=0,31 do
  local s=mget(x,y)
  if s==p.anim.current.frame then
   mset(x,y,0)
   p.x=x*8
   p.y=y*8
  end
 end end

--[[
 -- replace map placeholders
 gem_count=0
 gem_total=0
 gems={}
 local x local y
 for x=0,63 do for y=0,31 do
  local s=mget(x,y)
  if s==62 then
   gem_total=gem_total+1
   mset(x,y,0)
   local g=create_moveable_item(x*8,y*8,0,0)
   g.anim:add_stage("still",1,false,{62},{})
   g.anim:init("still",dir.left)
   g.update=function(self)
    if self.is.invisible then return end
    if p.x<self.x+7
     and p.x+8>self.x
     and p.y<self.y+7
     and p.y+8>self.y then
     self.is.invisible=true
     gem_count=gem_count+1
    end
   end
   gems[#gems+1]=g
  end
  if s==p.anim.current.frame then
   mset(x,y,0)
   p.x=x*8
   p.y=y*8
  end
 end end
]]
--[[
 enemies={{64,64},{24,88},{32,16}}
 for i,enemy in pairs(enemies) do
  enemies[i]=create_moveable_item(enemy[1],enemy[2],0.2,-1.75)
  enemies[i].anim:add_stage("walk",5,true,{64,65,66,67},{64,65,66,67})
  enemies[i].anim:add_stage("walk_turn",5,false,{68,69,70},{68,69,70},"walk")
  enemies[i].anim:init("walk",dir.right)
  enemies[i].update=function(self)
   local dir=self.anim.current.face==1 and -1 or 1
   self.dx=(self.dx+(self.ax*dir))*drag.ground
   self.dx=mid(-self.max.dx,self.dx,self.max.dx)
   if abs(self.dx)<self.min.dx then self.dx=self.min.dx end
   if self.anim.current.tick%2==0 then
    if self.can_move_x(self,2) then
     self.x=round(self.x+self.dx)
    else
     self.dx=0
     self.anim.current.face=self.anim.current.face==1 and 2 or 1
     self.anim.current:set("walk_turn")
    end
   end
  end
 end

 waters={{64,32},{72,32},{80,32}}
 for i,water in pairs(waters) do
  waters[i]=create_moveable_item(water[1],water[2],0,0)
  waters[i].anim:add_stage("still",5,true,{44,45,46,47},{})
  waters[i].anim:init("still",dir.left)
 end
]]

 -- dump fget data to an array format that can be used in tic-80 code
 -- d="" for s=0,127 do d=d..fget(s).."," end printh(d,"@clip")
end

function _update60()
 p:update()
 p.camera:update()
 --for _,gem in pairs(gems) do gem:update() end
end

function _draw()
 cls()
 p.camera:map()
 p:draw()

 --for _,gem in pairs(gems) do gem:draw() end

 -- hud
 camera(0,0)
 spr(62,98,1)
 --print(sub("0"..gem_count,-2).."'"..gem_total,107,2)

 print("stage:"..p.anim.current.stage,0,0)
 print("dir:"..p.anim.current.face,62,0)
 print("frame:"..p.anim.current.frame,0,7)
 print("t:"..p.anim.current.tick,62,7)
 print("b:"..p.btn1.tick,62,14)
 print("dx:"..p.dx,0,14) print("dy:"..p.dy,30,14)
 print("grounded:"..(p.is.grounded and "t" or "f"),86,0)
 print("jumping:"..(p.is.jumping and "t" or "f"),86,7)
 print("falling:"..(p.is.falling and "t" or "f"),86,14)
 print("sliding:"..(p.is.sliding and "t" or "f"),86,21)

 --print("camera:"..p.camera.x..","..p.camera.y,0,21)
 print("preslide:"..p.preslide.tick,0,28)
 print("slide:"..p.slide.tick,0,35)
end

__gfx__
0000000022288e8822288e8822288e8800000000000000000000000022288e8822288e8822288e8800000000000000000000000018888e8822288e8822288f88
0000000033bb8e8833bb8e8833bb8e8822288e8800000000000000002288babb2288babb2288babb22288e88000000000000000013bb8e8833bbb98833b97779
0000000022888e8822888e8822888e8833bb8e8822288e8822288e8822888e8822888e8822888e882288babb22288e8822288e88c1888e8822888e8822888f88
0000000022288e8822288e8822288e8822888e8833bb8e8833bb8e8822288e8822288e8822288e8822888e882288babb2288babb11888e8822288e8822288e88
0000000002222220022222200222222022288e8822888e8822888e8802222220022222200222222022288e8822888e8822888e88c18222200222222002222220
000000000000288000288000000000000222222022288e8822288e880288000000028800000000000222222022288e8822288e88918000002880000028800000
00000000000000000000000002882880002880000222222002222220000000000000000002882880000288000222222002222220918000002880000028800000
00000000000002880000028800000000288000000228800000288280288000002880000000000000000002880002288002828800c10000000000000000000000
2222222222288e8822288f880000000022288e880000000022288e8822288f8822288e8822288e8822288e8822288e8822288ee122288e8822288f8822288e88
33bb979b33bbb98833b9777922288e8822bb979b22288e8833bbb98833b9777922bb979b22bb979b33b9777933bbb9882288a7a122bb979b33b9777933bbb988
22888e8822888e8822888f8822bb979b22888e8833bbbe8822888e8822888f8822888e8822888e8822888e8822888e8822888e1c22888e8822888f8822888e88
22288e8822288e8822288e8822888e8822288e8822888e8822288e8822288e8822288e8822288e8822288e8822288e8822288e1122288e8822288e8822288e88
02222220022222200222222022288e880222222022288e880222222002222220022222200222222002222220022222200222221c022222200222222002222220
02880000028800000028280002222220000028800222222000002880000028000028800002880000002800000002880000000219000002880000028800002880
28800000000000000000000000288000000000000002880000000000000000000000000000000000000000000000000000000219000002880000028800000288
0000000000028800000000000000288000288000028800000028800000280000028800000002880000002800000028800000001c000000000000000000000000
22288e8822288e880000000010000000000000000000000100000000000000000000000000000000000000000000000011001100070007000000000000000000
33bb8e882288babb00000000000000000000000000000000000000000000000000000000000000000000000000000000c700c700011001100000000000000000
22888e8822888e8810000000000000000000000100000000000000000000000000000000000000000000000000000000cccccccc0cc00cc000000000c00c7007
22288e8822288e8800000000100000000000000000000001000000000000000000000000000000000000000000000000cccccccccccccccc00cc00cccccccccc
02222220022222201000000000000000000000010000000c00000000000000000000000000000000000000000000000011cc11ccccccccccc7ccc7cccccccccc
0028800000028800c000000010000000000000000000000100000000000000000000000000000000000000000000000011111111c11cc11ccccccccc1cc11cc1
0000000000000000100000001000000000000001000000010000000000000000000000000000000000000000000000005151515111111111cc11cc1111111111
28800000000002881000000010000000000000010000000100000000000000000000000000000000000000000000000015151515515151511111111151515151
b3bb3bbb00000003b00000003333333300000000000000000000004a44444444000ddd00000000000000000000000000d100001d0000000000010000228e8000
bbbbbbbb0000003bbb0000000303b3b000000000000020000000049a44444444055dd6d00000000000000000000000001000000100000000001c100028bab000
3b3bb3b30000003bb0000000000300b00000000000088800000049aa4444444455dddd60000000000000000000000000000000000000000001c6c100228e8000
4b53b5350000003b0000000000000000003030000028a82009999a00444444445ddddddd00000000000000000000000000000000000000001ccc6c1002220000
4354354500000003b00000000000000003383330000888004909a000444444445ddddddd000000000005d6001010101000000000011cc7c001ccc10000000000
4454454400000000000000000000000008333383000023b04000a00044444444555ddddd5d6000000055ddd07070707000000000011cc7c0001c100000000000
444444440000000300000000000000003333833300033b0044099000444444445555555055dd05000d055dd0606060601000000101111c100001000000000000
444444440000000000000000000000000333333000003b000444000044444444055555000550055055d055006d6d6d6dd100001d22888e880000000000000000
0000000000011000000cc000000770000000000000000000000aa000ccc667660000000000000000000000000000000000000000000000000000000000000000
44499a9944499a9944499a9944499a99000000000008800044499a9900111d110000000000000000000000000000000000000000000000000000000000000000
44999a9944999a9944999a9944999a990002200044499a9944999a99cc6667660000000000000000000000000000000000000000000000000000000000000000
44499a9944499a9944499a9944499a9944499a9944999a9944499a99ccc667660000000000000000000000000000000000000000000000000000000000000000
28e028e0028e08e02028e08e28028e0e44999a9944499a9928028e0e0cccccc00000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000044499a992028e08e00000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000003000000000300000000000028e08e00300300000300000000000000000000000000000000000000000000000000000000000000000000000000000
0300030030300030003030030030030033333333333033033030030300c6c6000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000003000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__label__
b3bb3bbbb3bb3bbbb3bb3bbbb3bb3bbbb00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb0000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000
3b3bb3b33b3bb3b33b3bb3b33b3bb3b3b00000000000000000000000000000000000000000000000000000000000000000001c10000666066600600660066600
4b53b5354b53b5354b53b5354b53b53500000000000000000000000000000000000000000000000000000000000000000001c6c1000606060606000060060600
43543545435435454354354543543545b000000000000000000000000000000000000000000000000000000000000000001ccc6c100606060600000060060600
4454454444544544445445444454454400000000000000000000000000000000000000000000000000000000000000000001ccc1000606060600000060060600
44444444444444444444444444444444000000000000000000000000000000000000000000000000000000000000000000001c10000666066600000666066600
44444444444444444444444444444444000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000
33333333000000000000000033333333000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303b3b000000000000000000303b3b0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000300b00000000000000000000300b0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000001c10000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000001c6c1000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000001ccc6c100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000001ccc1000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000001c10000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000
0000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000001c100000000000
000000000000000000000000000000000000000000000000000888000000000000000000000000000000000000000000000000000000000001c6c10000000000
0000000000000000000000000000000000000000000000000028a820000000000000000000000000000000000000000000000000000000001ccc6c1000000000
000000000000000000000000000000000000000000000000000888000000000000000000000000000000000000000000000000000000000001ccc10000000000
00000000000000000000000000000000000000005d600000000023b000000000000000000000000000000000000000000000000000000000001c100000000000
000000000000000000000000000000000000000055dd050000033b00000000000000000000000000000000000000000000000000000000000001000000000000
00000000000000000000000000000000000000000550055000003b00000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000003b3bb3bbbb3bb3bbbb3bb3bbbb3bb3bbbb3bb3bbbb000000000000000000000000000000000000000000000000000000000000000
00000000000000000000003bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb00000000000000000000000000000000000000000000000000000000000000
00000000000000000000003b3b3bb3b33b3bb3b33b3bb3b33b3bb3b33b3bb3b3b000000000000000000000000000000000000000000000000000000000000000
00000000000000000000003b4b53b5354b53b5354b53b5354b53b5354b53b5350000000000000000000000000000000000303000000000000000000000000000
0000000000000000000000034354354543543545435435454354354543543545b00000000000000000000000000000000338333000000000000000000005d600
00000000000000000000000044544544445445444454454444544544445445440000000000000000000000000000000008333383000000005d6000000055ddd0
000000000000000000000003444444444444444444444444444444444444444400000000000000000000000000000000333383330000000055dd05000d055dd0
00000000000000000000000044444444444444444444444444444444444444440000000000000000000000000000000003333330000000000550055055d05500
0000000000000000000000004444444433333333000000000000000033333333000000000000000000000003b3bb3bbbb3bb3bbbb3bb3bbbb3bb3bbbb3bb3bbb
000000000000000000000000444444440303b3b000000000000000000303b3b000000000000000000000003bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
00000000000000000000000044444444000300b00000000000000000000300b000000000000000000000003b3b3bb3b33b3bb3b33b3bb3b33b3bb3b33b3bb3b3
000000000000000000000000444444440000000000000000000000000000000000000000000000000000003b4b53b5354b53b5354b53b5354b53b5354b53b535
00000000000000000000000044444444000000000000000000000000000000000000000000000000000000034354354543543545435435454354354543543545
00000000000000000000000044444444000000000000000000000000000000000000000000000000000000004454454444544544445445444454454444544544
00000000000000000000000044444444000000000000000000000000000000000000000000000000000000034444444444444444444444444444444444444444
00000000000000000000000044444444000000000000000000000000000000000000000000000000000000004444444444444444444444444444444444444444
00000000000000000000000344444444000000000000000000000000000000000000000000000000000000003333333300000000000000003333333300000000
00000000000000000000003b44444444000000000000000000000000000000000000000000000000000000000303b3b000000000000000000303b3b000000000
00000000000000000000003b4444444400000000000000000000000000000000000000000000000000000000000300b00000000000000000000300b000000000
00000000000000000000003b44444444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000344444444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000044444444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000344444444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000044444444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000001000044444444b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000001c100044444444bb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000001c6c10044444444b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000001ccc6c1044444444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000001ccc10044444444b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000001c10004444444400000000000000000000000000000000000000005d600000000000000000000000000000000000000000000000000000
00000000000000000001000044444444000000000000000000000000000000000000000055dd0500000000000000000000000000000000000000000000000000
00000000000000000000000044444444000000000000000000000000000000000000000005500550000000000000000000000000000000000000000000000000
00000000000000000000000044444444000000000000000000000003b3bb3bbbb3bb3bbbb3bb3bbbb00000000000000000000000000000000000000000000000
0000000000000000000000004444444400000000000000000000003bbbbbbbbbbbbbbbbbbbbbbbbbbb0000000000000000000000000000000000000000000000
0000000000000000000000004444444400000000000000000000003b3b3bb3b33b3bb3b33b3bb3b3b00000000000000000000000000000000000000000000000
0000000000000000000000004444444400000000000000000000003b4b53b5354b53b5354b53b535000000000000000000000000000000000000000000000000
00000000000000000000000044444444000000000000000000000003435435454354354543543545b00000000000000000000000000000000000000000000000
00000000000000000000000044444444000000000000000000000000445445444454454444544544000000000000000000000000000000000000000000000000
00000000000000000000000044444444000000000000000000000003444444444444444444444444000000000000000000000000000000000000000000000000
00000000000000000000000044444444000000000000000000000000444444444444444444444444000000000000000000000000000000000000000000000000
00000000000000000000000044444444000100000000000000000000000000003333333300000000000000000000000000000000000100000000000000000000
00000000000000000000000044444444001c10000000000000000000000000000303b3b000000000000000000000000000000000001c10000000000000000000
0000000000000000000000004444444401c6c100000000000000000000000000000300b00000000000000000000000000000000001c6c1000000000000000000
000000000000000000000000444444441ccc6c1000000000000000000000000000000000000000000000000000000000000000001ccc6c100000000000000000
0000000000000000000000004444444401ccc100000000000000000000000000000000000000000000000000000000000000000001ccc1000000000000000000
00000000000000000000000044444444001c10000000000000000000000000000000000000000000000000000000000000000000001c10000000000000000000
00000000000000000000000044444444000100000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000
00000000000000000000000044444444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000344444444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000003b44444444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000003b44444444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000003b44444444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000344444444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000044444444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000344444444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000044444444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000044444444b000000000000000000000000000000000000003b3bb3bbbb3bb3bbbb000000000000000000000000000000000000000
00000000000000000000000044444444bb0000000000000000000000000000000000003bbbbbbbbbbbbbbbbbbb00000000000000000000000000000000000000
00000000000000000000000044444444b00000000000000022288e88000000000000003b3b3bb3b33b3bb3b3b000000000000000000000000000000000000000
0000000000000000000000004444444400000000000000002288babb000000000000003b4b53b5354b53b5350000000000000000000000000000000000000000
00000000000000000000000044444444b00000000000000022888e8800000000000000034354354543543545b000000000000000000000000005d60000000000
00000000000000000000000044444444000000000000000022288e88000000000000000044544544445445440000000000000000000000000055ddd05d600000
00000000000000000000000044444444000000000000000002222220000000000000000344444444444444440000000000000000000000000d055dd055dd0500
000000000000000000000000444444440000000000000000028800000000000000000000444444444444444400000000000000000000000055d0550005500550
00000000000000000000000344444444b0000000000000000000000000000000000000003333333300000000000000000000000000000003b3bb3bbbb3bb3bbb
00000000000000000000003b44444444bb000000000000002880000000000000000000000303b3b00000000000000000000000000000003bbbbbbbbbbbbbbbbb
00000000000000000000003b44444444b000000000000000000000000000000000000000000300b00000000000000000000000000000003b3b3bb3b33b3bb3b3
00000000000000000000003b444444440000000000000000000000000000000000000000000000000000000000000000000000000000003b4b53b5354b53b535
00000000000000000000000344444444b00000000000000000000000000000000000000000000000000000000000000000000000000000034354354543543545
00000000000000000000000044444444000000000000000000000000000000000000000000000000000000000000000000000000000000004454454444544544
00000000000000000000000344444444000000000000000000000000000000000000000000000000000000000000000000000000000000034444444444444444
00000000000000000000000044444444000000000000000000000000000000000000000000000000000000000000000000000000000000004444444444444444
00000000000000000000000033333333000000000000000000000000000000000000000000000000000000000000000000000000000000003333333300000000
0000000000000000000000000303b3b0000000000000000000000000000000000000000000000000000000000000000000000000000000000303b3b000000000
000000000000000000000000000300b000000000000000000000000000000000000000000000000000000000000000000000000000000000000300b000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0005d60000000000000000000000000000000000000000000000000000000000000000000005d60000000000000000000000000000000000000000000005d600
0055ddd05d600000000000005d600000000000000000000000000000000000005d6000000055ddd00000000000000000000000005d600000000000000055ddd0
0d055dd055dd05000000000055dd05000000000000000000000000000000000055dd05000d055dd000000000000000000000000055dd0500000000000d055dd0
55d05500055005500000000005500550000000000000000000000000000000000550055055d05500000000000000000000000000055005500000000055d05500
44444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
44444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
44444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
44444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
44444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
44444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
44444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
44444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444

__gff__
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100000000000003010000000400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
3737373737373737373737373737373737373737373737370000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3733003e00333300330000330000003300333300000033370000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
373200000000000000000000003e000000000000000000370000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
37000000000000000000003a3935003900000000000031370000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3700000000000000003130303030303032000000000000370000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3732000000000000000000333300330000000000000000370000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3700000000000000000000000000000000390000000031370000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
373400003a000000000000000000313030303032000031370000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3730303030303200000000000000000000003300000000370000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3733330000330000000000000000000000000000000000370000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3732000000003e00000000000000000000000000000031370000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
373e00000000003935000000000000003e000000000000370000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
37000000313030303030320000003400393a0000000000370000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3732000000373300003300003130303030303032000000370000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3732000031370000000000000033000033003300000031370000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
370000003e373200000000390000000000000000000000370000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3700000000370000313030303200000000000000003e00370000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3732000031373e00000033000000003e00000000000031370000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3700000031370000000000000000000000000000000031370000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
373e00000037320000003130303200003a393500000000370000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3700000031373200000000330000003130303030320031370000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3732000000330000000000000000000033003300000000370000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
37383a39003900000100393a00000039003a000000393a370000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3737373737373737373737373737373737373737373737370000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
