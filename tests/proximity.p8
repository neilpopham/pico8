pico-8 cartridge // http://www.pico-8.com
version 42
__lua__


-- ⬅️➡️⬆️⬇️🅾️❎

-- sets the volume for a range of notes in the given sfx
function set_volumes(sfxid, start, values)
    local address=0x3200+68*sfxid+start*2
    for _,value in ipairs(values) do
        local bytes=%address&0xf1ff
        bytes=bytes|value<<9
        poke2(address,bytes)
        address+=2       
    end
end

function _init()
    x,y,v=0,64,0
    set_volumes(0,0,{0,0,0})
    sfx(0)
end 

function _update60()
    if (btn(➡️)) x+=1
    if (btn(⬅️)) x-=1
    v=mid(0,flr((x/120)*7+0.5),7)
    set_volumes(0,0,{v,v,v})
end 

function _draw()
    cls()
    spr(1,x,y)
    spr(2,120,64)
    print("volume:"..tostr(v),0,0)
end 

__gfx__
00000000bbbbbbbb8888888800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000bbbbbbbb8888888800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700bbbbbbbb8888888800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000bbbbbbbb8888888800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000bbbbbbbb8888888800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700bbbbbbbb8888888800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000bbbbbbbb8888888800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000bbbbbbbb8888888800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
000100030005003050020500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
