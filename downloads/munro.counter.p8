pico-8 cartridge // http://www.pico-8.com
version 18
__lua__
--code for odometer
poke(24364,3)
odos={}
meters={}
function sgn0(n)
return n==0 and 0 or sgn(n)
end

function odometer(ind,final,x,y,c)
cur=odos[ind] or 0
cur+=mid(0.0625,abs(final-cur),abs(final-cur)/100)*sgn0(final-cur)
local str_cur,dig=tostr(abs(flr(cur)))
clip(x,y,#str_cur*4,5)
for i=#str_cur,1,-1 do
 local n,off=tonum(sub(str_cur,i,i)),0
 if n!=0 and not dig then
  off,dig=cur%1*6,true 
 end
 cursor(x+i*4-4,y+off-6,c)
 for j=-1,1 do
  print((n+j)%10)
 end
end
clip()
odos[ind]=cur
end


for x=0,2 do
	for y=0,2 do
	 add(meters,
	 {x=y*24,
	 y=x*24,
	 n=rnd(300)
	 }
	 )
	end
end
::_::
cls()
i=0
for met in all(meters) do
odometer(i,met.n,met.x,met.y,7)
i+=1
end
flip()
goto _


-->8
--cur=0
--new=100
--
--function _draw()
-- cls()
---- cur=odometer(cur,new,7)
-- cur=odometer2(cur,new,32,0,7)
--end
----function odometer(cur,final,c)
---- cur+=.25*sgn0(final-cur)
---- clip(0,0,127,5)
---- local str_cur=tostr(flr(cur))
---- local dig=false
---- for i=#str_cur,1,-1 do
----  local n,off=tonum(sub(str_cur,i,i)),0
----	 if n!=0 and not dig then
----		 off,dig=cur%1*6,true
------		 dig=true	
----		end
----  cursor(i*4,off-6,c)
----  for j=-1,1 do
----   print((n+j)%10)
----  end
---- end
---- clip()
---- return cur
----end
--
--function odometer2(cur,final,x,y,c)
-- cur+=.25*sgn0(final-cur)
-- local str_cur,dig=tostr(flr(cur))
-- clip(x,y,#str_cur*4,6)
-- for i=#str_cur,1,-1 do
--  local n,off=tonum(sub(str_cur,i,i)),0
--	 if n!=0 and not dig then
--		 off,dig=cur%1*6,true	
--		end
--  cursor(x+i*4-4,y+off-6,c)
--  for j=-1,1 do
--   print((n+j)%10)
--  end
-- end
-- clip()
-- return cur
--end
--
--
--function sgn0(n)
-- return n==0 and 0 or sgn(n)
--end
-->8

--
--counter="0"
--oldcounter="0"
--tween={0,0,0,0}
--
--function _update()
--	cls(8)
----	tween+=1
--	for i=1,#counter do
--		if tween[i]!=2 then
--			tween[i]+=1
--		end
--		clip(0,2,127,5)
--		x=(#counter-i)*4
--		print(sub(counter,i,i),x,tween[i])
--		print(sub(oldcounter,i,i),x,tween[i]+6)
--	end
--	if btnp(‚ùé) then
--		oldcounter=counter
--		counter=tostr(tonum(counter)+1)
--		for i=1,#counter do
--			if sub(oldcounter,i,i)!=sub(counter,i,i) then
--				tween[i]=-6
--			end
--		end
--
--	end
--	printh(tween)
--	wait(1)
--end
--
--function wait(_wait)
--	repeat
--		_wait-=1
--		flip()
--	until _wait<0
--end
-->8
--function odometer(a,b,x,y,c)
-- cur=odos[a] or 0
-- cur+=mid(0.0625,abs(b-cur),abs(b-cur)/100)*sgn0(b-cur)
-- local str_cur,dig=tostr(abs(flr(cur)))
-- clip(x,y,#str_cur*4,6)
-- for i=#str_cur,1,-1 do
--  local n,off=tonum(sub(str_cur,i,i)),0
--  if n!=0 and not dig then
--   off,dig=cur%1*6,true 
--  end
--  cursor(x+i*4-4,y+off-6,c)
--  for j=-1,1 do
--   print((n+j)%10)
--  end
-- end
-- clip()
-- odos[a]=cur
--end
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__label__
77770000770077000000000000000000000000000000000077777700777777000000000000000000000000000000000077770000777700007700000000000000
77770000770077000000000000000000000000000000000077777700777777000000000000000000000000000000000077770000777700007700000000000000
00770000777777000000000000000000000000000000000077007700770077000000000000000000000000000000000000770000007700007700000000000000
00770000777777000000000000000000000000000000000077007700770077000000000000000000000000000000000000770000007700007700000000000000
00770000770077000000000000000000000000000000000077777700770077000000000000000000000000000000000000770000007700007777770000000000
00770000770077000000000000000000000000000000000077777700770077000000000000000000000000000000000000770000007700007777770000000000
00770000777777000000000000000000000000000000000000000000770077000000000000000000000000000000000000770000007700007700770000000000
00770000777777000000000000000000000000000000000000000000770077000000000000000000000000000000000000770000007700007700770000000000
77777700000000000000000000000000000000000000000077777700777777000000000000000000000000000000000077777700777777007777770000000000
77777700000000000000000000000000000000000000000077777700777777000000000000000000000000000000000077777700777777007777770000000000
00000000777777000000000000000000000000000000000000007700000000000000000000000000000000000000000000000000000000000000000000000000
00000000777777000000000000000000000000000000000000007700000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
77770000777777007700770000000000000000000000000077777700000000000000000000000000000000000000000077777700777777000000000000000000
77770000777777007700770000000000000000000000000077777700000000000000000000000000000000000000000077777700777777000000000000000000
00770000000077007700770000000000000000000000000000007700777777000000000000000000000000000000000000007700000077000000000000000000
00770000000077007700770000000000000000000000000000007700777777000000000000000000000000000000000000007700000077000000000000000000
00770000777777007777770000000000000000000000000000777700000077000000000000000000000000000000000000777700000077000000000000000000
00770000777777007777770000000000000000000000000000777700000077000000000000000000000000000000000000777700000077000000000000000000
00770000770000000000000000000000000000000000000000007700777777000000000000000000000000000000000000007700000077000000000000000000
00770000770000000000000000000000000000000000000000007700777777000000000000000000000000000000000000007700000077000000000000000000
77777700777777007777000000000000000000000000000077777700770000000000000000000000000000000000000077777700000077000000000000000000
77777700777777007777000000000000000000000000000077777700770000000000000000000000000000000000000077777700000077000000000000000000
00000000000000000077000000000000000000000000000000000000777777000000000000000000000000000000000000000000000000000000000000000000
00000000000000000077000000000000000000000000000000000000777777000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000f00000000000
0000000000f000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000f00f000000
00000000000f00000000000000000000000000000000000000000000000000000000000000000000f00000000000000000000000000000000000000000000000
00000000f0000000000000000000000000000000000000000f00000000000000000000000000f00000f0000ff000000000000000000000000000000000000000
0000000000000000000000000000000000000f000000000000000000000000000000f000000000000000000000000000000000000000000000f0000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000f000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
77000000000000000000000000000000000000000000000077000000000000000000000000000000000000000000000077770000777777000000000000000000
77000000000000000000000000000000000000000000000077000000000000000000000000000000000000000000000077770000777777000000000000000000
77000000777700000000000000000000000000000000000077000000777777000000000000000000000000000000000000770000770077007700770000000000
77000000777700000000000000000000000000000000000077000000777777000000000000000000000000000000000000770000770077007700770000000000
77777700007700000000000000000000000000000000000077777700770077000000000000000000000000000000000000770000770077007700770000000000
77777700007700000000000000000000000000000000000077777700770077000000000000000000000000000000000000770000770077007700770000000000
77007700007700000000000000000000000000000000000077007700777777000000000000000000000000000000000000770000770077007777770000000000
77007700007700000000000000000000000000000000000077007700777777000000000000000000000000000000000000770000770077007777770000000000
77777700007700000000000000000000000000000000000077777700000077000000000000000000000000000000000077777700777777000000770000000000
77777700007700000000000000000000000000000000000077777700000077000000000000000000000000000000000077777700777777000000770000000000
00000000777777000000000000000000000000000000000000000000000077000000000000000000000000000000000000000000000000000000770000000000
00000000777777000000000000000000000000000000000000000000000077000000000000000000000000000000000000000000000000000000770000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000

