pico-8 cartridge // http://www.pico-8.com
version 43
__lua__
--general--

function _init()
	map()
	iplr()
	idays()
end

function _update()
	uplr()
	uactions()
	udays()
end

function _draw()
	cls()
	--set colors--
	poke(0x5f2e, 1)
	pal(
		{
			[0] = 0, -15, 3, -12,
			-16, -13, 14, 4, -11, -6,
			-9, -2, -10, 7, 15, -1
		}, 1
	)

	map()
	dplr()
	print(flr(clock), 110, 117)
	print(flr(day), 100, 117)
end
-->8
--player movement/tile select--

function iplr()
	--state
	state = 1
	--animated player--
	psp = 37
	--animated tile select--
	slspr = 7
	plr = {
		x = 63,
		y = 63
	}
end

function uplr()
	if state == 1 then
		--player movement--
		if btn(➡️) then
			plr.x += 1
			pflip = true
		end
		if btn(⬅️) then
			plr.x -= 1
			pflip = false
		end
		if btn(⬆️) then
			plr.y -= 1
		end
		if btn(⬇️) then
			plr.y += 1
		end
	end

	--moves tile select
	--infront of player--
	tile = {
		x = flr((plr.x + 3) / 8),
		y = flr((plr.y + 16) / 8)
	}
end

function dplr()
	if state == 1 then
		--animates player idle--
		if psp < 40.9 then
			psp += .2
		else
			psp = 37
		end
	elseif state == 2 then
		--animates player refill--
		if psp < 107.9 then
			psp += .2
		else
			psp = 37
			state = 1
		end
	end

	--player position--
	spr(psp, plr.x, plr.y, 1, 1, pflip)

	--animates tile select--
	if slspr < 9.9 then
		slspr += .1
	else
		slspr = 7
	end

	--tile select position--
	spr(slspr, tile.x * 8, tile.y * 8)

	--tile select location--
	--broadcast--
	print(tile.x, 1, 1, 15)
	print(",", 9, 1, 15)
	print(tile.y, 12, 1, 15)
end

-->8
--action button ❎--

function uactions()
	if btnp(❎) then
		--replace ground with seeds--
		local sp = mget(tile.x, tile.y)

		--adds 16 to tile to tile to--
		--chage it to watered--
		if fget(sp, 0) then
			mset(tile.x, tile.y, 1)
		elseif fget(sp, 1) then
			mset(tile.x, tile.y, sp + 16)
		elseif fget(sp, 4) then
			refill()
		end
	end
end

function refill()
	day += 1
	clock = 24
	state = 2
	psp = 96
end
-->8
--day cycle--

function idays()
	day = 1
	clock = 24
end

function udays()
	clock -= .1
end

-->8
--test--

__gfx__
00000000555555555555555555555555555555555555555555551155ddc00cddcc0000cc00000000000000000000000000000000777777777777777777777777
00000000555555555555555555588555555555555555115555512515c000000c00000000000000000000000000000000000000007effffbbbbbbbbbbbbffffe7
007007005555555555584555558cc4555555555555512515555555550000000000000000000000000000000000000000000000007ff73f743333333347f37ff7
0007700055545555558c845558c88c455555555555515515555115550000000000000000000000000000000000000000000000003b3e73e7444444447e37e3b3
00077000154845455548845558c44c455555555555555555551251550000000000000000000000000000000000000000000000003b73e7f7111111117f7e37b3
00700700545454845558855554ccc8455555555555115555551551550000000000000000000000000000000000000000000000003bf77fb3444444443bf77fb3
00000000484515455555555555c88855555555555125155551551555c000000c00000000000000000000000000000000000000003b3efb341111111143bfe3b3
00000000545151515555555555555555555555555555555555555555ddc00cddcc0000cc000000000000000000000000000000003b33334144444444143334b3
666666665555555555555555555555555555555555555555555115550000000000000000000000000000000000000000000000003b37771111111111117773b3
666666665555555555555555555885555551115551155555551251550000000000000000000000000000000000000000000000003b7efe744444444447efe7b3
688668865555555555584555558774555512551512515555551551550000000000000000000000000000000000000000000000003bf37fe7111111117ef73fb3
866866685558555555873455587337455555555515515555555155150000000000000000000000000000000000000000000000003b37e3f7444444447f3e73b3
866866681587458555433455587447455555555555555115555555550000000000000000000000000000000000000000000000003b7f37e7111111117e73f7b3
866866865854583455533555547773455511555555551251551155550000000000000000000000000000000000000000000000003bf77f377777777773f77fb3
688668888345154555555555557333555125155555551551512515550000000000000000000000000000000000000000000000003bbbbbbbbbbbbbbbbbbbbbb3
66666666545151515555555555555555515515555555555555555555000000000000000000000000000000000000000000000000333333333333333333333333
000000005555885555585555588555885555555500dddd00000000000000000000dddd0000000000000000000077770088880000008800000000000000000000
000000005558bb85558e885558e888e8555555550d8d88c000dddd0000dddd000d8d88c000999900000000000733337087e7880008de80000000000000000000
00000000558b44f8588f8e85558ebe8555555555d8888ddc0d8d88c00d8d88c0d8888ddc020200200000000007f4ef704337ef8008ee48400000000000000000
000000005587fe348efb8f85558b3f8555555555d84f4ddcd8888ddcd8888ddcd84f4ddc090900900000000007e4ee704fb3ff8000448ef40000000000000000
0000000058b77734584bbfe4558efe8515151515d8eee88cd84f4ddcd84f4ddcd8eee88c020022200000000007e444704bb3377808404ff40000000000000000
000000008b4f73458e87344558e773e8515151514b737bb4dbeeebbcd8eee88c03737330090000900000000007feef70044333e48fb404400000000000000000
0000000047f373458fbb3b4554777388151515154b737bb44b737bb44b737bb44b737bb40022220000000000037777300004f3404bb400000000000000000000
000000005473345558433455473334555151515104344340043443404b737bb44b344bb400000000000000000033330000004400044000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00dddd0000dddd0000dddd0000dddd0000dddd0000dddd0000dddd0000dddd0000dddd00000000000000000000dddd0000dddd0000dddd00d000000000000000
0d8d88c00dcdccd00dddddd00dcdccd00d8d88c00dcdccd00dddddd00dcdccd00d8d88c000dddd0000dddd000dcdccd00d8d88c00d8d88c00044440000000000
d8888ddcdccccddddddddddddccccdddd8888ddcdc8e8dddddcdcddddc8e8dddd84f4ddc0dcdccd00dddddd0dccccdddd8888ddcd8888ddc04c8cc4000444400
d84f4ddcdc8e8dddddcdcddddc8e8dddd84f4ddcdcdddddddddddddd4bdddbb44bbdbb40dc8e8ddddddddddddccccdddd8888ddcddc8dddc0488cc4d04c8cc40
d8eee88cdcdddccddddddddddcdddccdd8eee88cdcdddccd4bdddbb44bdddbb44bbebb404bbdbb40dddddddddccccccdd888888cd88d888c0488884d0488cc40
4b737bb44b737bb44b737bb44b737bb44b737bb44b737bb44b737bb404737340047373404bbdbb40ddcdcddddccccccdd88c888cd88ccddcd488884004888840
4b737bb44b737bb44b737bb44b737bb44b737bb44b737bb4047373400473734004737340047373404dddddd44dccccd44cd888c44cd8d8c44488884444888844
043443400434434004344340043443400434434004344340043443400434434004344340047373404bddddb44bddddb44bccccb44bccccb44b8888b4dd88d8bd
000000000000000000000000000000000000000000dddd0000dddd0000dddd0000dddd0000dddd0000dddd0000dddd0000dddd0000dddd0000dddd0000dddd00
00000000000000000000000000000000000000000d8d88c00d8d88c00d8d88c00d8d88c00d8d88c00d8d88c00d8d88c00d8d88c00d8d88c00d8d88c00d8d88c0
0044440000444400004444000000000000000000d8888ddcd8888ddcd8888ddcd8888ddcd8888ddcd8888ddcd8888ddcd8888ddcd8888ddcd8888ddcd8888ddc
04c8cc4004c8cc4004c8cc400000000000000000d84f4ddcd4f48ddcdf488ddcd4888ddcd8888ddcd8888ddcd8888ddcd8888ddcd8888ddcd8884ddcd884fddc
0488cc400488cc400488cc400000000000000000d8eee88cdeee888cdee8888cde88888cd888888cd888888cd888888cd888888cd8888eecd888eeecd88eee8c
48888884488888844888888400000000000000004b737bb40437bb40047bb44004bb744004bb77404bb777b44b777bb40477bb40044bb74004bb73404bb737b4
48888884488888844888888400000000000000004b737bb40437bb40047bb40004bb740004bb77404bb777b44b777bb40477bb40004bb74004bb73404bb737b4
dd88d8bddd88d8bddd88d8bd00000000000000000434434004343400003340000043300000434340043443400434434004343400000433000043434004344340
00dddd0000dddd0000dddd0000dddd0000dddd0000dddd0000dddd0000dddd0000dddd0000dddd0000dddd0000dddd0000000000000000000000000000000000
0d8d88c00d8d88c00d8d88c00d8d88c00dcdccd00dddddd00dddddd00dcdccd00d8d88c00d8d88c00d8d88c00d8d88c000000000000000000000000000000000
d8888ddcd8888ddcd8888ddcd8888ddcdccccddddddddddddddddddddccccdddd8888ddcd8888ddcd8888ddcd8888ddc00000000000000000000000000000000
d84f4ddcd4f48ddcdf488ddcd4888ddcdccccddddddddddddddddddddccccdddd8888ddcd8888ddcd8884ddcd884fddc00000000000000000000000000000000
d8eee88cdeee888cdee8888cde88888cdccccccddddddddddddddddddccccccdd88888ecd8888eecd888eeecd88eee8c00000000000000000000000000000000
4b737bb40437bb40047bb44004bb744004bb77404bb777b44b777bb40477bb400447bb40044bb74004bb73404bb737b400000000000000000000000000000000
4b737bb40437bb40047bb40004bb740004bb77404bb777b44b777bb40477bb400047bb40004bb74004bb73404bb737b400000000000000000000000000000000
04344340043434000033400000433000004343400434434004344340043434000003340000043300004343400434434000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000ffffffffffffffff00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000ffffffffffffffff00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000ffffffffffffffff00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000ffffffffffffffff00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000ffffffffffffffff00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000ffffffffffffffff00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000bbbbbbbbbbbbbbbb00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000111111111111111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__gff__
0002020201010100000000000000000010040404010101000000000000000000000808080000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0414040416040404041404041504060400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0404040404050416040405040404040400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0405140404041504040404041604040400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0604050416040404060414041404160400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0402020412121504040404040404040400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0402020412120404140405060404140400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1603030413130404040404040504041500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0403030413130410040414040404040400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1504041404040404040415040604040400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0422220423230404040404040404140400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0422220423230404041404040404040400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0415040414041604040404140416040600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0421210401010511110404040404040400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0421210501010411110415050404140400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0d0e0e0e0e0e0e0e0e0e0e0e0e0e0e0f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1d1e1e1e1e1e1e1e1e1e1e1e1e1e1e1f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
