pico-8 cartridge // http://www.pico-8.com
version 43
__lua__

-- change palette
poke(0x5f2e,1)

pal(15,0)

class=setmetatable(
    {
        new=function(_ENV,tbl)
            return setmetatable(tbl or {},{__index=_ENV})
        end
    },
    {__index=_ENV}
)

entity=class:new({
    -- tile=function(p)
    --     return p\8
    -- end
})

#include functions.lua
#include mapmaker.lua
#include player.lua

mapmaker()

function _update60()
    if btn(0) then p.x-=1 end
    if btn(1) then p.x+=1 end
    if btn(2) then p.y-=1 end
    if btn(3) then p.y+=1 end

    if btnp(4) or btnp(5) then mapmaker() end

    p:update()
end

function _draw()
    cls()
    local cx,cy=p.x,p.y
    camera(cx-64,cy-64)
    map(0,0)

    p:draw()
end

__gfx__
00000000ffffffffdddddddd55555555777777777777777677777777777767767777777777777776776777777777777600000000000000000000000000000000
00000000ffffffffdddddddd55555555766666666666666576666666666657657666666666666665765766666666666500000000000000000000000000000000
00000000ffffffffdddddddd55555555655555555555555576666666666657657666666666666665765766666666666500000000000000000000000000000000
00000000ffffffffdddddddd55555555777777777777777676666666666657657666666666666665765766666666666500000000000000000000000000000000
00000000ffffffffdddddddd55555555766666666666666576666666666657657666666666666665765766666666666500000000000000000000000000000000
00000000ffffffffdddddddd55555555766666666666666576666666666657657666666666666665765766666666666500000000000000000000000000000000
00000000ffffffffdddddddd55555555766666666666666576666666666657657666666666666665765766666666666500000000000000000000000000000000
00000000ffffffffdddddddd55555555766666666666666576666666666657657666666666666665765766666666666500000000000000000000000000000000
000000000000000055555555dddddddd766666666666666576666666666657657666666666666665765766666666666500000000000000000000000000000000
000000000000000055555555dddddddd766666666666666576666666666657657666666666666665765766666666666500000000000000000000000000000000
000000000000000055555555dddddddd766666666666666576666666666657657666666666666665765766666666666500000000000000000000000000000000
000000000000000055555555dddddddd766666666666666576666666666657657666666666666665765766666666666500000000000000000000000000000000
000000000000000055555555dddddddd766666666666666576666666666657656555555555555555765766666666666500000000000000000000000000000000
000000000000000055555555dddddddd766666666666666576666666666657657777777777777775765766666666666500000000000000000000000000000000
000000000000000055555555dddddddd766666666666666576666666666657657666666666666665765766666666666500000000000000000000000000000000
000000000000000055555555dddddddd655555555555555565555555555556556555555555555555655655555555555500000000000000000000000000000000
88888888888888880000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
88888888888888880000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
88888888888888880000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
88888888888888880000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
88888888888888880000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
88888888888888880000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
88888888888888880000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
88888888888888880000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
88888888888888880000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
88888888888888880000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
88888888888888880000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
88888888888888880000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
88888888888888880000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
88888888888888880000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
88888888888888880000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
88888888888888880000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
