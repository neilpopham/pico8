pico-8 cartridge // http://www.pico-8.com
version 42
__lua__

-- set palette
poke(0x5f2e,1)
pal({[0]=0,1,2,-13,4,5,6,7,8,9,10,11,-6,13,-7,0},1)

class=setmetatable(
    {
        new=function(_ENV,tbl)
            return setmetatable(tbl or {},{__index=_ENV})
        end
    },
    {__index=_ENV}
)

entity=class:new({
    tile=function(p)
        return p\8
    end
})

#include functions.lua
#include player.lua
#include frog.lua
#include beam.lua
#include button.lua
#include frog.lua
#include objectify.lua

cx,cy=24,448

function _update60()
    p:update()
    for e in all(entities) do e:update() end
end

function _draw()
    cls()

    local mincx,maxcx,mincy,maxcy=cx-16,cx+16,cy-16,cy+16

    if mincx>p.x then
        cx+=min(p.x-mincx,2)
    end
    if maxcx<p.x then
        cx+=min(p.x-maxcx,2)
    end
    cx=mid(64,cx,960)

    if mincy>p.y1 then
        cy+=min(p.y1-mincy,3)
    end
    if maxcy<p.y1 then
        cy+=min(p.y1-maxcy,3)
    end
    cy=mid(64,round(cy),448)

    camera(cx-64,cy-64)

    map(0,0)

    for e in all(entities) do e:draw() end

    p:draw()

    camera(0,0)

    color(5)

    print(p.x,0,0)
    print(p.y1,16,0)
    print(p.y2,32,0)

    -- -- print(flr(stat(2)*10000/100),0,0,7)
    -- print(stat(2),0,0)
    -- print(stat(7),35,0)
    -- print(stat(8),50,0)
    -- -- print(stat(9),60,10,7)

    -- print(p.x,70,0)
    -- print(cx,90,0)
    -- print(p.x-cx,110,0)

end

__gfx__
00000000777077707770777077777770777707777000000000000007700000000000000760000000000000060777777077707777000000000000000000000000
00000000707070707070707070000070700707077000000000000007700000000000000760000000000000060700007070707007000000000000000000000000
00000000700000000000000070000000000000077000000000000007700000000000000766000000000000660000007000000007000000000000000000000000
00000000700000000000000000000000000000070000000000000000700000000000000760000000000000060000000000000000000000000000000000000000
00000000700000000000000000000000000000077000000000000007700000000000000760600000000006060000000000000000000000000000000000000000
00000000700000000000000000000000000000070000000000000000700000000000000766000000000000660000000000000000000000000000000000000000
00000000700000000000000000000000000000070000000000000000700000000000000766000000000000660000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000060600000000006060000000000000000000000000000000000000000
00000000660000000000000000000000000000666600000060000000000000060000006600000000000000000000000000000000000000000000000000000000
00000000660000000000000000000000000000666000000066000000000000660000000600000000000000000000000000000000000000000000000000000000
00000000606000000000000000000000000006066600000066000000000000660000006600000000000000000000000000000000000000000000000000000000
00000000660060000000000000000000000000666600000060060000000060060000006600000000000000000000000000000000000000000000000000000000
00000000660600000000000000006000000060666060000066000000000000660000060600000000000000000000000000000000000000000000000000000000
00000000606006000006000006000000006006066600000066000000000000660000006600000000000000000000000000000000000000000000000000000000
00000000660660660660660660660660660660666600000060600000000006060000006600000066660000000000000000000000000000000000000000000000
00000000666666666666666666666666666666666000000066000000000000660000000600000066660000000000000000000000000000000000000000000000
03003030030030303003030000000000000000000000000000000000099999900000000000000000000000006000000000000006000000077000000000000000
03003030030030303000030000000000000000000000000000000000090000900000000000000000000000000000000000000000000000077000000000000000
03003030030030300000030000000000000000000000000000000000090000900000000000000000000000006000000000000006000000077000000000000000
03000300030030000000000000000000000000000000000000000000099999900000000000000000000000000000000000000000000000000000000000000000
03000000003030000000000000000000000000000000000000000000000090000000000000000000000000006000000000000006000000000000000000000000
00000000000300000000000000030000000800000000000000000000000990000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000003030030008080800000000000000000000090000000000000000006600000006300000000000036000000000000000000000000
00000000000000000000000033033033080808080000000000000000009990000000000000000066660000003300000000000033000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000111111003b77b30
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001111111103b77b30
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001111f1f103b77b30
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001111f1f103b77b30
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001111111103b77b30
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001111111103b77b30
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001111111103b77b30
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000111111003b77b30
0000000000000000000000000cccccc0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000cccccccc000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000ccccfcfc000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000ccccfcfc000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000cccccccc000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000cccccccc000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000cccccccc000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000cccccc0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
11111111111111111111111111111111111111110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
11111111111111111111111111111111111111110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
11bb11111111bb1113b77b31111aa11111aa11110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
11bb11111111bb1113b77b3111aaa11111aaa1110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
11bbbb1111bbbb1113b77b3111aaa11111aaa1110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
11bbbb1111bbbb1113b77b31111aa11111aa11110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
11111111111111111111111111111111111111110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
11111111111111111111111111111111111111110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
72000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
72000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
72000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
72000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
72000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
72000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
72000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
72000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
72000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
72000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
72000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
72000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
72000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000323200320000320032003232003232
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
7200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000030203020203040000010203020302020b040
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
72000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000800000500000000000000060
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
72000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000a00000900000000000000060
3200000000000000000000000000000000000000304000000000f0d000d0d0000000000000000000000000000000000000000000000000000000000000000000
9221312131312121313121312131213131213131213121312131a100000000000000000000000000000000000000000000000000810000610000000000000060
b0400000000000000000000000000000000000000000000000000000f0d0d0000000000000000000000000000000000000000000000000000000000000000000
80000000000000000000000000000000002200221222022222126100000000000000000000913131212131212131212121313121410000113131a10000000000
0060000000000000000000000000000000000000000000f0d000d0d0000000000000000000000000000000000000000000000000000000000000000000000000
80000000000000000000000000000000000000000000000000001131212131212121312131411200000000000000002200220022120000120212500000000000
006017320000000000000000000000000000000000000000001732d0323232000000000000000000000000000000000000000000000000000000000000000000
60000000000000000000000000000000000000000000000000001222000022220000000000000000000000000000000000000000000000000000700000000000
0060b04000000000000000000000000000000000f0d000d0d0103030203020000000000000000000000000000000000000000000000000000000000000000000
8000000000f0d0d0e00000000000000000f0d0e00000000000000000000000000000000000000000000000000000000000000000000000000000500000000000
000000600000000000000000000000000000000000001732d0700000000000000000000000000000000000000000000000000000000000000000000000000000
600000f0d0d0d0d0d0e00000000000f0d0d0d0d0d0d0e000000000f0d000d0d0e000000000000000000000000000000000000000000000000000700000000000
000000603232000000f0d0d0d0d0e00000f0d000d0d0103030500000000000000000000000000000000000000000000000000000000000000000000000000000
8000f0d0d0d0d0e0000000000000000000f0d0d0d0d0e0000000000000f0d0d0e000000000003200323200320000000000003200320032003200500000000000
00000060b0400000000000d0d0d0e0000000001732d0700000000000000000000000000000000000000000000000000000000000000000000000000000000000
800000f0d0d0d0d0e0000000000000000000f0d0e000000000000000000000000000000000001020202020204000000000103030203020303020e20000000000
0000000000600000000000d0e0000000000000103030500000000000000000000000000000000000000000000000000000000000000000000000000000000000
600000000000f0d0e000000000000000000000000000000000001732003232320032320032327000000000006000000000900000000000000000000000000000
00000000006032000000000000000000173200700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
6000000000000000000000000000000000000000000000000000103030203020203030203020e200000000008000000000113131313131313131a10000000000
000000000060b0400000000000000000103030500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
8000000000000000000000f0d0e00000000000000032320032007000000000000000000000000000000000006000000000000000220002220212510000000000
00000000000000a00000000000323200700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
80000000000000000000000000000000000000000010203020305000000000000000000000000000000000008000000000000000000000000037113131313131
31313131313131410000000000102030500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
60000000000000000000000000000000000000003250000000000000000000000000000000000000000000008000000000000000000000000000220022020000
22000027002202220000320032500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000072
800000000000000000000000000000001030202030e2000000000000000000000000000000000000000000006000000000000000000000000000000000000000
00000000000000000000102030e20000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000072
80000000000000000000000000000000500000000000000000000000000000000000000000000000000000008000000000170017001700170017000000000000
00000027000000000000500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000072
60b020303020203020303020302030305000000000000000000000000000000000000000000000000000000060b0302030302020302030202030202030302030
20302030302020302030500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000072727272
__gff__
0001010101010101010101010100000000010101010101010101010000000000000000000000000000000002020101000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001020101020000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
2700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000027272727
2700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000027
2700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000027
2700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000027
2700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
000100000a5400d5400f54000200147000200002000010001c0001d0001d0000000006000185501b5501d550202002b1000000000000020000000000000000000000000000042000320003200032000320003200
000100000363008620026300561000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000100000472009730127401a2001a2001a2001920017200172001720017200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000100000f010176201203017630140301c640170501c6701b0001f600190001d0001e000246001e0001d0001d0001d0001d0001d0001d0001d0001d0001e0001e00014000140003460000000000000000000000
000100030005003050020500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
900100000455004550045500455004550045500355003550035500255002550015500155000550005500000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0004000006550003000a5500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
