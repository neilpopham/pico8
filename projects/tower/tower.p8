pico-8 cartridge // http://www.pico-8.com
version 21
__lua__
--
-- by Neil Popham

-- btnp initial delay
poke(0x5f5c,8)
-- btnp repeat delay
poke(0x5f5d,2)

local pad={left=0,right=1,up=2,down=3,btn1=4,btn2=5}

#include functions.lua
#include objects.lua
#include mapping.lua
#include astar.lua
#include bresenham.lua
#include minsky.lua
#include guns.lua
#include stages.lua
#include stages/stage_intro.lua
#include stages/stage_main_ui.lua
#include stages/stage_main_placing.lua
#include stages/stage_main_viewing.lua
#include stages/stage_main.lua
#include stages/stage_outro.lua

function _init()
 printh("==== _init() ====")
 stage=stage_intro -- stage_main
 stage:init()
end

function _update60()
 stage:update()
end

function _draw()
 cls()
 stage:draw()
 stages:draw()
end

__gfx__
3333333344444444bbbbbbbbccccccccaaaaaaaa9999999900000000000000000000000000000000000000000000000000000000000000000000000000000000
3333333344444444bbbbbbbbccccccccaaaaaaaa9999999900000000000000000000000000000000000000000000000000000000000000000000000000000000
3333333344444444bbbbbbbbccccccccaaaaaaaa9999999900000000000000000000000000000000000000000000000000000000000000000000000000000000
3333333344444444bbbbbbbbccccccccaaaaaaaa9999999900000000000000000000000000000000000000000000000000000000000000000000000000000000
3333333344444444bbbbbbbbccccccccaaaaaaaa9999999900000000000000000000000000000000000000000000000000000000000000000000000000000000
3333333344444444bbbbbbbbccccccccaaaaaaaa9999999900000000000000000000000000000000000000000000000000000000000000000000000000000000
3333333344444444bbbbbbbbccccccccaaaaaaaa9999999900000000000000000000000000000000000000000000000000000000000000000000000000000000
3333333344444444bbbbbbbbccccccccaaaaaaaa9999999900000000000000000000000000000000000000000000000000000000000000000000000000000000
00600000066600000666000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66660000606060006060600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66666000666660006060600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66660000000000006000600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00600000066600000666000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000

__map__
c8c8c8c8c83859383859383859383819281938381928193838192819380c492819380c492819380c49281938781938280a481938180a1012381938201b12301938182b12281938080a082b0a301938221b4019380812200a080a2819382012481938400a301938781d38c8980a28880a38801a080a201849280a081a18184930
0a080a201849500a1018191819280a381819181968181918196818191819680c291871100c291871100c29187110a01910280a701910180a1012601910201b12304110182b12284110080a082b0a304110221b4019380812200a080a2819382012481938400a301938781d380000000000000000000000000000000000000000
